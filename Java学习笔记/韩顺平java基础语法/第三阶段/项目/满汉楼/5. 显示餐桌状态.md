---
aside: right
outline: [2, 3]
---

<h1 style="text-align: center; font-weight: bold;">显示餐桌状态</h1>

---

## 思路分析

> #### 在原先的分层设计上增加 DiningTable 部分

#### （1）domain 层：DiningTable

#### （2）Dao 层：DiningTableDao

#### （3）service 层：DiningTableService

#### （4）view 层：增加相关的逻辑

> #### 逐层调用，实现功能

## 创建 diningTable 表

```sql
CREATE TABLE diningTable (
	id INT PRIMARY KEY AUTO_INCREMENT, #自增, 表示餐桌编号
	state VARCHAR(20) NOT NULL DEFAULT '',#餐桌的状态
	orderName VARCHAR(50) NOT NULL DEFAULT '',#预订人的名字
	orderTel VARCHAR(20) NOT NULL DEFAULT ''
)CHARSET=utf8;

INSERT INTO diningTable VALUES(NULL, '空','','');
INSERT INTO diningTable VALUES(NULL, '空','','');
INSERT INTO diningTable VALUES(NULL, '空','','');
```

## DiningTable

> #### 数据库表的映射类（Javabean）

```java
package domain;

/**
 * ClassName: DiningTable
 * Package: domain
 * Description:
 *
 * @author jacksonling
 * @version 1.0
 * @Date 2025-08-06 16:17
 */
public class DiningTable {
    private Integer id;
    private String state;
    private String orderName;
    private String orderTel;

    public DiningTable() {
    }

    public DiningTable(Integer id, String state, String orderName, String orderTel) {
        this.id = id;
        this.state = state;
        this.orderName = orderName;
        this.orderTel = orderTel;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getOrderName() {
        return orderName;
    }

    public void setOrderName(String orderName) {
        this.orderName = orderName;
    }

    public String getOrderTel() {
        return orderTel;
    }

    public void setOrderTel(String orderTel) {
        this.orderTel = orderTel;
    }

    // 根据显示要求，重写 toString() 方法调整输出格式
    @Override
    public String toString() {
        return id + "\t\t\t" + state;
    }
}
```

## DiningTableDao

```java
package dao;

import domain.DiningTable;

/**
 * ClassName: DiningTableDao
 * Package: dao
 * Description:
 *
 * @author jacksonling
 * @version 1.0
 * @Date 2025-08-06 16:19
 */
public class DiningTableDao extends BasicDao<DiningTable> {
    //如果有特别的操作，可以写在 DiningTableDAO
}
```

## DiningTableService

```java
package service;

import dao.DiningTableDao;
import domain.DiningTable;

import java.util.List;

/**
 * ClassName: DiningTableService
 * Package: service
 * Description:
 *
 * @author jacksonling
 * @version 1.0
 * @Date 2025-08-06 16:21
 */
public class DiningTableService {
    // 创建 Dao 对象
    DiningTableDao diningTableDao = new DiningTableDao();

    // 编写方法，返回所有餐桌状态并显示
    public void listDiningTale(){
        List<DiningTable> diningTables = diningTableDao.queryTable("select id, state from diningTable", DiningTable.class);
        System.out.println("\n餐桌编号\t\t餐桌状态");
        for (DiningTable diningTable : diningTables) {
            System.out.println(diningTable);
        }
        System.out.println("==============显示完毕============");
    }
}
```

## View

```java
package view;

import com.sun.org.apache.bcel.internal.generic.NEW;
import domain.Employee;
import service.DiningTableService;
import service.EmployeeService;
import utils.Utility;

/**
 * ClassName: logInView
 * Package: view
 * Description:
 *
 * @author jacksonling
 * @version 1.0
 * @Date 2025-08-06 14:09
 */

public class View {
    // 循环结束标志
    boolean loop = true;
    // 接收用户输入
    String key = "";

    // 创建 EmployeeService 对象
    EmployeeService employeeService = new EmployeeService();
    // 创建 diningTableService 对象
    DiningTableService diningTableService = new DiningTableService();

    //显示主菜单
    public void mainMenu() {
        while (loop) {
            System.out.println("\n===============满汉楼================");
            System.out.println("\t\t 1 登录满汉楼");
            System.out.println("\t\t 2 退出满汉楼");
            System.out.print("请输入你的选择: ");
            key = Utility.readString(1);
            switch (key) {
                case "1":
                    System.out.print("输入员工号: ");
                    String empId = Utility.readString(50);
                    System.out.print("输入密  码: ");
                    String pwd = Utility.readString(50);
                    Employee employee = employeeService.getEmployeeByIdAndPwd(empId, pwd);
                    if (employee != null) { //说明存在该用户
                        System.out.println("===============登录成功[" + employee.getName() + "]================\n");
                        //显示二级菜单, 这里二级菜单是循环操作，所以做成while
                        while (loop) {
                            System.out.println("\n===============满汉楼(二级菜单)================");
                            System.out.println("\t\t 1 显示餐桌状态");
                            System.out.println("\t\t 2 预定餐桌");
                            System.out.println("\t\t 3 显示所有菜品");
                            System.out.println("\t\t 4 点餐服务");
                            System.out.println("\t\t 5 查看账单");
                            System.out.println("\t\t 6 结账");
                            System.out.println("\t\t 9 退出满汉楼");
                            System.out.print("请输入你的选择: ");
                            key = Utility.readString(1);
                            switch (key) {
                                case "1":
                                    // 显示餐桌状态
                                    diningTableService.listDiningTale();
                                    break;
                                case "2":
                                    // 预定餐桌
                                    System.out.println("预定餐桌");
                                    break;
                                case "3":
                                    // 显示所有菜品
                                    System.out.println("显示所有菜品");
                                    break;
                                case "4":
                                    // 点餐服务
                                    System.out.println("点餐服务");
                                    break;
                                case "5":
                                    // 查看账单
                                    System.out.println("查看账单");
                                    break;
                                case "6":
                                    // 结账
                                    System.out.println("结账");
                                    break;
                                case "9":
                                    loop = false;
                                    break;
                                default:
                                    System.out.println("你的输入有误，请重新输入");
                                    break;
                            }
                        }
                    } else {
                        System.out.println("=====登录失败（用户名 / 密码错误）=====");
                    }
                    break;
                case "2":
                    loop = false;//
                    break;
                default:
                    System.out.println("你输入有误，请重新输入.");
            }
        }
        System.out.println("退出了满汉楼系统~");
    }
}
```
