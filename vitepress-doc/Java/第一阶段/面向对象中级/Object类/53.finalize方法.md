---
outline: [2, 3]
sidebar: tue
aside: right
---

<h1 style="text-align: center; font-weight: bold;">finalize 方法</h1>

---

## 基本介绍

> #### 说明：实际开发中<span style="color:red">很少</span>或者<span style="color:red">几乎不会</span>重写 finalize 方法，更多的是<span style="color:red">应对面试考点</span>

#### （1）当<span style="color:red">对象被回收</span>时，系统会<span style="color:red">自动调用</span>该对象的 <span style="color:red">finalize</span> 方法。子类可以<span style="color:red">重写</span>该方法，<span style="color:red">实现额外的资源释放操作</span>（必然：释放资源，数据库连接，或者打开文件......）

#### （2）什么时被回收：当一个对象没有任何引用时，则 JVM 认为该对象不再是一个可达对象。该对象将被垃圾回收器回收，在<span style="color:red">回收对象时，会调用 finalize 方法</span>

#### （3）对象回收机制的调用，是在系统决定对象已没有引用后自动完成的。通过<span style="color:red">调用 System.gc() 主动触发垃圾回收机制</span>

#### 补充说明

> #### （1）<span style="color:red">垃圾回收</span>会在 JVM 内存使用达到<span style="color:red">某个阈值</span>时<span style="color:red">自动进行</span>。调用 <span style="color:red">System.gc( )</span> 可以请求 JVM 进行垃圾回收，但这<span style="color:red">只是一个建议</span>，JVM <span style="color:red">不一定会立即执行</span>垃圾回收操作
>
> #### （2）手动触发垃圾回收并不推荐，因为 JVM 通常能够自动选择最佳时机来执行垃圾回收。过度干预垃圾回收可能会影响性能

## 代码示例

```java
public class finalize {
    public static void main(String[] args) {
        finals finals = new finals(18);
        finals = null;
        // 主动触发垃圾回收机制，回收对象会调用 finalize（）方法
        System.gc();
    }
}
class finals{
    int age;

    public finals(){

    }

    public finals(int age) {
        this.age = age;
    }

    @Override
    protected void finalize() throws Throwable {
        System.out.println("调用finalize回收对象");
    }
}

// 输出
调用finalize回收对象
```

#### 代码分析

> #### （1）使用 alt + insert 重写 finalize 方法
>
> #### （2）使用 System.gc( ) 主动触发垃圾回收机制，进而验证对象没有被引用时，默认调用 fianlize 方法实现垃圾回收机制
